var songList,controlManager,$=window.Zepto,root=window.player,$scope=$(document.body),index=0,audioControl=new root.audioControl;function bindEvent(){$scope.on("change",function(o,n){audioControl.getAudio(songList[n].audio),"play"==audioControl.status&&(audioControl.play(),root.process.start(0)),root.process.renderAllTime(songList[n].duration),root.render(songList[n]),root.process.update(0)}),$scope.on("click",".play-btn",function(){"play"==audioControl.status?(audioControl.pause(),root.process.stop()):(root.process.update(0),audioControl.play(),root.process.start()),$(this).toggleClass("pause")}),$scope.on("click",".prev-btn",function(){var o=controlManager.prev();$scope.trigger("change",[o])}),$scope.on("click",".next-btn",function(){var o=controlManager.next();$scope.trigger("change",[o])})}function bindTouch(){var o=$scope.find(".slider-pointer"),n=$scope.find(".pro-wrapper").offset(),e=n.left,r=n.width;o.on("touchstart",function(){root.process.stop()}).on("touchmove",function(o){var n=(o.changedTouches[0].clientX-e)/r;(n<0||1<n)&&(n=0),root.process.update(n)}).on("touchend",function(o){var n=(o.changedTouches[0].clientX-e)/r;(n<0||1<n)&&(n=0);var t=n*songList[controlManager.index].duration;audioControl.playTo(t),root.process.start(n),$scope.find(".play-btn").removeClass("pause")})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){void 0,root.render(o[0]),songList=o,controlManager=new root.controlManager(o.length),bindEvent(),$scope.trigger("change",[0]),bindTouch()},error:function(){void 0}})}getData("../mock/data.json");